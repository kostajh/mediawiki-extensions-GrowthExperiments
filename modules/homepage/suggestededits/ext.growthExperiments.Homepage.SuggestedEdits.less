@import 'mediawiki.ui/variables';
@import 'mediawiki.mixins';
@import '../ext.growthExperiments.variables.less';

@cardWrapperWidth: 260px;
@cardContainerWrapperHeight: 256px;
@imageHeight: 128px;

// This block is separate from the rest as it is targeting the process dialog contents.
.suggested-edits-difficulty-filters {
	.suggested-edits-filters-error {
		margin-bottom: 10px;
	}

	h4.suggested-edits-difficulty-level-label {
		display: inline-block;
		// Align with icon.
		margin-bottom: -0.5em;
		padding-left: 5px;
	}

	.oo-ui-checkboxMultiselectWidget {
		padding-top: 5px;
	}

	p.suggested-edits-difficulty-level-desc {
		color: @colorGray2;
		padding-top: 5px;
	}

	.suggested-edits-article-count {
		padding-left: 5px;
		color: @colorGray5;
	}

	.suggested-edits-checkbox-create.oo-ui-widget {
		.oo-ui-labelElement-label {
			display: block;
		}

		.suggested-edits-create-article-additional-msg {
			display: block;
			padding-left: 6px;
			font-size: 12px;
		}
	}
}

.growthexperiments-homepage-module-suggested-edits {
	&.growthexperiments-homepage-module-desktop {
		background-color: rgba( 234, 243, 255, 0.5 );
	}

	.suggested-edits-module-wrapper {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;

		.suggested-edits-pager {
			margin-top: 24px;
			font-size: 0.875em;
			color: @colorGray2;
		}

		.suggested-edits-filters {
			// Make the button full width (T236841); this is harder than it should be
			width: 100%;

			.oo-ui-buttonGroupWidget {
				width: 100%;

				.oo-ui-buttonElement {
					width: 100%;

					.oo-ui-buttonElement-button {
						width: 100%;
						text-align: left;

						.oo-ui-labelElement-label {
							text-overflow: ellipsis;
							white-space: nowrap;
							overflow: hidden;
							// Needed for ellipses to work.
							width: 100%;
							// Needed for width to take effect.
							display: inline-block;
							// Needed due to the inline-block override.
							margin-bottom: -5px;

							.growthexperiments-homepage-mobile-summary &,
							.growthexperiments-homepage-mobile-details & {
								font-size: 1.15em;
							}
						}
					}
				}
			}
		}

		.se-card-no-results,
		.se-card-error,
		.se-card-end-of-queue {
			width: @cardWrapperWidth;
			height: @cardContainerWrapperHeight;

			.se-card-title,
			.se-card-text {
				text-align: center;
				color: @colorGray2;
				padding: 20px 10px 0 10px;
			}

			.se-card-image {
				height: @imageHeight;
			}

			.growthexperiments-homepage-mobile-summary &,
			.growthexperiments-homepage-mobile-details & {
				h3.se-card-title {
					font-size: 1em;
				}
			}
		}

		// stylelint-disable-next-line no-descending-specificity
		.se-card-end-of-queue {
			.se-card-image {
				/* @embed */
				background: url( ../../../images/end-of-queue.svg ) no-repeat center center;
			}
		}

		// stylelint-disable-next-line no-descending-specificity
		.se-card-no-results {
			.se-card-image {
				/* @embed */
				background: url( ../../../images/no-results.svg ) no-repeat center center;
			}
		}

		// stylelint-disable-next-line no-descending-specificity
		.se-card-error {
			.se-card-image {
				background: url( ../../../images/suggestededits/error-message.svg ) no-repeat center center;
			}
		}

		.suggested-edits-task-explanation-wrapper {
			padding: 24px 0;
			width: @cardWrapperWidth;

			.suggested-edits-title-and-info {
				display: flex;
				justify-content: center;
				align-content: center;

				h4 {
					margin-top: unset;
					margin-bottom: unset;
					padding-top: unset;
					// Override line-height: 1.3; in Minerva
					line-height: 1.6;
				}

				.oo-ui-iconElement {
					text-align: left;
					margin-top: -5px;
				}

				p {
					color: @colorGray2;
				}

				.suggested-edits-difficulty-indicator {
					margin-left: auto;
					margin-top: 2px;
					text-transform: uppercase;
					font-size: 12px;
					height: 14px;
					line-height: 1.4em;
					position: relative;
					padding: 2px 4px;
					// Counter the global border-box rule on mobile
					box-sizing: content-box;
				}

				.suggested-edits-popup-detail {
					.suggested-edits-difficulty-time-estimate {
						display: flex;

						.suggested-edits-difficulty-indicator {
							margin-left: 0;
						}

						.suggested-edits-difficulty-level {
							font-size: 12px;
							margin-top: 2px;
							padding-left: 10px;
						}

						.suggested-edits-difficulty-level-easy {
							color: @easyColor;
						}

						.suggested-edits-difficulty-level-medium {
							color: @mediumColor;
						}

						.suggested-edits-difficulty-level-hard {
							color: @hardColor;
						}
					}
				}

				.suggested-edits-difficulty-indicator-easy {
					background-color: fade( @easyColor, 20% );
					color: @easyColor;
				}

				.suggested-edits-difficulty-indicator-after-mixin() {
					content: '';
					position: absolute;
					right: -4px;
					bottom: 0;
					width: 0;
					height: 0;
					border-right: 4px solid transparent;
				}

				.suggested-edits-difficulty-indicator-easy:after {
					.suggested-edits-difficulty-indicator-after-mixin();
					border-top: 9px solid fade( @easyColor, 20% );
					border-bottom: 9px solid fade( @easyColor, 20% );
				}

				.suggested-edits-difficulty-indicator-medium {
					background-color: fade( @mediumColor, 20% );
					color: @mediumColor;
				}

				.suggested-edits-difficulty-indicator-medium:after {
					.suggested-edits-difficulty-indicator-after-mixin();
					border-top: 9px solid fade( @mediumColor, 20% );
					border-bottom: 9px solid fade( @mediumColor, 20% );
				}

				.suggested-edits-difficulty-indicator-hard {
					background-color: fade( @hardColor, 20% );
					color: @hardColor;
				}

				.suggested-edits-difficulty-indicator-hard:after {
					.suggested-edits-difficulty-indicator-after-mixin();
					border-top: 9px solid fade( @hardColor, 20% );
					border-bottom: 9px solid fade( @hardColor, 20% );
				}
			}

			.suggested-edits-short-description {
				height: 20px;
				color: @colorGray5;
				font-size: 0.9em;
			}
		}

		.suggested-edits-card-wrapper {
			padding-top: 5px;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-direction: row;
			height: @cardContainerWrapperHeight;

			.suggested-edits-previous,
			.suggested-edits-next {
				padding: 0 20px;
			}

			.suggested-edits-task-card-wrapper {
				.box-shadow(0 5px 10px 0 rgba(0, 0, 0, 0.15));
				width: @cardWrapperWidth;
				background-color: @background-color-base;

				a {
					text-decoration: none;
					color: unset;
				}

				.se-card-content {
					.se-card-text {
						height: 128px;
						padding: 0 10px;
						color: @colorGray2;

						h3.se-card-title {
							margin: 0;
							white-space: nowrap;
							overflow: hidden;
							text-overflow: ellipsis;
						}

						.se-card-extract {
							position: relative;
							overflow: hidden;
							font-size: 0.875em;
							line-height: 1.5em;
							height: 4.5em;

							&:after {
								content: '';
								position: absolute;
								bottom: 0;
								width: 25%;
								height: 1.5em;
								pointer-events: none;
							}
						}

						&[ dir='ltr' ] .se-card-extract:after {
							/* @noflip */
							right: 0;
							/* @noflip */
							background: linear-gradient( to right, rgba( 255, 255, 255, 0 ), #fff 50% );
						}

						&[ dir='rtl' ] .se-card-extract:after {
							/* @noflip */
							left: 0;
							/* @noflip */
							background: linear-gradient( to left, rgba( 255, 255, 255, 0 ), #fff 50% );
						}

						.se-card-pageviews {
							font-size: 0.875em;
							padding-top: 10px;
							color: @colorGray5;

							.oo-ui-iconWidget {
								margin-right: 5px;
							}
						}
					}

					.se-card-image {
						height: @imageHeight;
						width: @cardWrapperWidth;
						background-color: @colorGray1;
						background-image: url( ../../../images/suggestededits/placeholder-image.svg );
					}
				}
			}
		}
	}

	.suggested-edits-footer {
		// negate the margin on .growthexperiments-homepage-module in ext.growthExperiments.Homepage.less
		// margin values are *1.11 due to the font-size rule
		margin: 0 -( @homepageModuleMargin / 0.9 ) -( @homepageModuleMargin / 0.9 );
		padding: 12px 24px 16px;
		background-color: @colorBaseInverted;
		color: @colorGray5;
		font-size: 0.9em;
	}

	&.growthexperiments-homepage-module-mobile-summary {
		.suggested-edits-main {
			display: flex;
			// temporary, per T235810#5626040
			padding: 4px 0 0 4px;

			.suggested-edits-icon {
				width: 64px;
				// Image URLs are relative to the current CSS
				.background-image-svg( '../../../images/suggestededits/Topic-general-64w.svg',
				'../../../images/suggestededits/Topic-general-64w@4x.png' );
				background-repeat: no-repeat;
				padding-right: 16px;
			}

			.suggested-edits-metric-number {
				font-size: 1.2em;
				font-weight: bold;
			}

			.suggested-edits-metric-subtitle {
				font-size: 0.8em;
			}
		}

		.suggested-edits-footer {
			// negate the margin on .growthexperiments-homepage-mobile-summary
			// .growthexperiments-homepage-module in ext.growthExperiments.Homepage.less
			// margin values are *1.25 due to the font-size rule
			margin: 16px -0.859375em -0.859375em;
			padding: 12px 16px 14.4px;
			background-color: @colorGray15;
			font-size: 0.8em;
		}
	}

	&.growthexperiments-homepage-module-mobile-overlay,
	&.growthexperiments-homepage-module-mobile-details {
		// stylelint-disable-next-line no-descending-specificity
		.suggested-edits-title-and-info {
			.oo-ui-iconElement .oo-ui-iconElement-icon {
				// Make the icon bigger, but keep the button the same size, and keep the icon centered
				// in the button
				width: 24/14em;
				left: 3/14em;
			}
		}

		.suggested-edits-pager {
			font-size: 0.8em;
			margin: 32px 0 24px 0;
		}
	}
}
